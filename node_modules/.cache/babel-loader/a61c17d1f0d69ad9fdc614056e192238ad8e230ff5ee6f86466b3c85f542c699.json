{"ast":null,"code":"// todo: extract to a separate place\n\nimport { Class, deepExtend, addClass, isFunction, setDefaultOptions } from '../../common';\nimport { convertToHtml, prepend, wrapInner, contains, hasNativeScrolling, on, off, proxy, wheelDeltaY, setDefaultEvents } from '../utils';\nimport { Transition, Animation } from './fx';\nimport { Pane, PaneDimensions, Movable, TapCapture } from './draggable';\nimport { UserEvents } from './user-events';\nimport { Observable } from './observable';\nvar extend = Object.assign,\n  abs = Math.abs,\n  SNAPBACK_DURATION = 500,\n  SCROLLBAR_OPACITY = 0.7,\n  FRICTION = 0.96,\n  VELOCITY_MULTIPLIER = 10,\n  MAX_VELOCITY = 55,\n  OUT_OF_BOUNDS_FRICTION = 0.5,\n  ANIMATED_SCROLLER_PRECISION = 5,\n  // SCROLLER_RELEASE_CLASS = 'km-scroller-release',\n  // SCROLLER_REFRESH_CLASS = 'km-scroller-refresh',\n  PULL = 'pull',\n  CHANGE = 'change',\n  RESIZE = 'resize',\n  SCROLL = 'scroll',\n  MOUSE_WHEEL_ID = 2;\nvar ZoomSnapBack = function (Animation) {\n  function ZoomSnapBack(options) {\n    Animation.call(this, options);\n    var that = this;\n    extend(that, options);\n    that.userEvents.bind('gestureend', that.start.bind(this));\n    that.tapCapture.bind('press', that.cancel.bind(this));\n  }\n  if (Animation) ZoomSnapBack.__proto__ = Animation;\n  ZoomSnapBack.prototype = Object.create(Animation && Animation.prototype);\n  ZoomSnapBack.prototype.constructor = ZoomSnapBack;\n  ZoomSnapBack.prototype.enabled = function enabled() {\n    return this.movable.scale < this.dimensions.minScale;\n  };\n  ZoomSnapBack.prototype.done = function done() {\n    return this.dimensions.minScale - this.movable.scale < 0.01;\n  };\n  ZoomSnapBack.prototype.tick = function tick() {\n    var movable = this.movable;\n    movable.scaleWith(1.1);\n    this.dimensions.rescale(movable.scale);\n  };\n  ZoomSnapBack.prototype.onEnd = function onEnd() {\n    var movable = this.movable;\n    movable.scaleTo(this.dimensions.minScale);\n    this.dimensions.rescale(movable.scale);\n  };\n  return ZoomSnapBack;\n}(Animation);\nvar DragInertia = function (Animation) {\n  function DragInertia(options) {\n    Animation.call(this);\n    var that = this;\n    extend(that, options, {\n      transition: new Transition({\n        axis: options.axis,\n        movable: options.movable,\n        onEnd: function onEnd() {\n          that._end();\n        }\n      })\n    });\n    that.tapCapture.bind('press', function () {\n      that.cancel();\n    });\n    that.userEvents.bind('end', proxy(that.start, that));\n    that.userEvents.bind('gestureend', proxy(that.start, that));\n    that.userEvents.bind('tap', proxy(that.onEnd, that));\n  }\n  if (Animation) DragInertia.__proto__ = Animation;\n  DragInertia.prototype = Object.create(Animation && Animation.prototype);\n  DragInertia.prototype.constructor = DragInertia;\n  DragInertia.prototype.onCancel = function onCancel() {\n    this.transition.cancel();\n  };\n  DragInertia.prototype.freeze = function freeze(location) {\n    var that = this;\n    that.cancel();\n    that._moveTo(location);\n  };\n  DragInertia.prototype.onEnd = function onEnd() {\n    var that = this;\n    if (that.paneAxis.outOfBounds()) {\n      that._snapBack();\n    } else {\n      that._end();\n    }\n  };\n  DragInertia.prototype.done = function done() {\n    return abs(this.velocity) < 1;\n  };\n  DragInertia.prototype.start = function start(e) {\n    var that = this,\n      velocity;\n    if (!that.dimension.enabled) {\n      return;\n    }\n    if (that.paneAxis.outOfBounds()) {\n      if (that.transition._started) {\n        that.transition.cancel();\n        that.velocity = Math.min(e.touch[that.axis].velocity * that.velocityMultiplier, MAX_VELOCITY);\n        Animation.prototype.start.call(this);\n      } else {\n        that._snapBack();\n      }\n    } else {\n      velocity = e.touch.id === MOUSE_WHEEL_ID ? 0 : e.touch[that.axis].velocity;\n      that.velocity = Math.max(Math.min(velocity * that.velocityMultiplier, MAX_VELOCITY), -MAX_VELOCITY);\n      that.tapCapture.captureNext();\n      Animation.prototype.start.call(this);\n    }\n  };\n  DragInertia.prototype.tick = function tick() {\n    var that = this,\n      dimension = that.dimension,\n      friction = that.paneAxis.outOfBounds() ? OUT_OF_BOUNDS_FRICTION : that.friction,\n      delta = that.velocity *= friction,\n      location = that.movable[that.axis] + delta;\n    if (!that.elastic && dimension.outOfBounds(location)) {\n      location = Math.max(Math.min(location, dimension.max), dimension.min);\n      that.velocity = 0;\n    }\n    that.movable.moveAxis(that.axis, location);\n  };\n  DragInertia.prototype._end = function _end() {\n    this.tapCapture.cancelCapture();\n    this.end();\n  };\n  DragInertia.prototype._snapBack = function _snapBack() {\n    var that = this,\n      dimension = that.dimension,\n      snapBack = that.movable[that.axis] > dimension.max ? dimension.max : dimension.min;\n    that._moveTo(snapBack);\n  };\n  DragInertia.prototype._moveTo = function _moveTo(location) {\n    this.transition.moveTo({\n      location: location,\n      duration: SNAPBACK_DURATION,\n      ease: Transition.easeOutExpo\n    });\n  };\n  return DragInertia;\n}(Animation);\nvar AnimatedScroller = function (Animation) {\n  function AnimatedScroller(options) {\n    Animation.call(this, options);\n    var that = this;\n    extend(that, options, {\n      origin: {},\n      destination: {},\n      offset: {}\n    });\n  }\n  if (Animation) AnimatedScroller.__proto__ = Animation;\n  AnimatedScroller.prototype = Object.create(Animation && Animation.prototype);\n  AnimatedScroller.prototype.constructor = AnimatedScroller;\n  AnimatedScroller.prototype.tick = function tick() {\n    this._updateCoordinates();\n    this.moveTo(this.origin);\n  };\n  AnimatedScroller.prototype.done = function done() {\n    return abs(this.offset.y) < ANIMATED_SCROLLER_PRECISION && abs(this.offset.x) < ANIMATED_SCROLLER_PRECISION;\n  };\n  AnimatedScroller.prototype.onEnd = function onEnd() {\n    this.moveTo(this.destination);\n    if (this.callback) {\n      this.callback.call();\n    }\n  };\n  AnimatedScroller.prototype.setCoordinates = function setCoordinates(from, to) {\n    this.offset = {};\n    this.origin = from;\n    this.destination = to;\n  };\n\n  /* eslint-disable no-param-reassign */\n  AnimatedScroller.prototype.setCallback = function setCallback(callback) {\n    if (callback && isFunction(callback)) {\n      this.callback = callback;\n    } else {\n      callback = undefined;\n    }\n  };\n  /* eslint-enable no-param-reassign */\n\n  AnimatedScroller.prototype._updateCoordinates = function _updateCoordinates() {\n    this.offset = {\n      x: (this.destination.x - this.origin.x) / 4,\n      y: (this.destination.y - this.origin.y) / 4\n    };\n    this.origin = {\n      y: this.origin.y + this.offset.y,\n      x: this.origin.x + this.offset.x\n    };\n  };\n  return AnimatedScroller;\n}(Animation);\nvar ScrollBar = function (Class) {\n  function ScrollBar(options) {\n    Class.call(this);\n    var that = this,\n      horizontal = options.axis === 'x';\n    var orientation = horizontal ? 'horizontal' : 'vertical';\n    var element = convertToHtml('<div class=\"km-touch-scrollbar km-' + orientation + '-scrollbar\" />');\n    extend(that, options, {\n      element: element,\n      elementSize: 0,\n      movable: new Movable(element),\n      scrollMovable: options.movable,\n      alwaysVisible: options.alwaysVisible,\n      size: horizontal ? 'width' : 'height'\n    });\n    that.scrollMovable.bind(CHANGE, that.refresh.bind(that));\n    that.container.appendChild(element);\n    if (options.alwaysVisible) {\n      that.show();\n    }\n  }\n  if (Class) ScrollBar.__proto__ = Class;\n  ScrollBar.prototype = Object.create(Class && Class.prototype);\n  ScrollBar.prototype.constructor = ScrollBar;\n  ScrollBar.prototype.refresh = function refresh() {\n    var that = this,\n      axis = that.axis,\n      dimension = that.dimension,\n      paneSize = dimension.size,\n      scrollMovable = that.scrollMovable,\n      sizeRatio = paneSize / dimension.total,\n      position = Math.round(-scrollMovable[axis] * sizeRatio),\n      size = Math.round(paneSize * sizeRatio);\n    if (sizeRatio >= 1) {\n      this.element.style.display = \"none\";\n    } else {\n      this.element.style.display = \"\";\n    }\n    if (position + size > paneSize) {\n      size = paneSize - position;\n    } else if (position < 0) {\n      size += position;\n      position = 0;\n    }\n    if (that.elementSize !== size) {\n      that.element.style[that.size] = size + 'px';\n      that.elementSize = size;\n    }\n    that.movable.moveAxis(axis, position);\n  };\n  ScrollBar.prototype.show = function show() {\n    this.element.style.opacity = SCROLLBAR_OPACITY;\n    this.element.style.visibility = \"visible\";\n  };\n  ScrollBar.prototype.hide = function hide() {\n    if (!this.alwaysVisible) {\n      this.element.style.opacity = 0;\n    }\n  };\n  return ScrollBar;\n}(Class);\n\n// export class Scroller extends Class {\nexport var Scroller = function (Observable) {\n  function Scroller(element, options) {\n    Observable.call(this);\n    var that = this;\n    this.element = element;\n    this._initOptions(options);\n    var hasScrolling = hasNativeScrolling(navigator.userAgent);\n    that._native = that.options.useNative && hasScrolling;\n    var scrollHeader = convertToHtml('<div class=\"km-scroll-header\"/>');\n    if (that._native) {\n      addClass(element, 'km-native-scroller');\n      prepend(scrollHeader, element);\n      extend(that, {\n        scrollElement: element,\n        fixedContainer: element.children[0]\n      });\n      return;\n    }\n    element.style.overflow = \"hidden\";\n    addClass(element, 'km-scroll-wrapper');\n    var scrollContainer = convertToHtml('<div class=\"km-scroll-container\"/>');\n    wrapInner(element, scrollContainer);\n    prepend(scrollHeader, element);\n    var inner = element.children[1],\n      tapCapture = new TapCapture(element),\n      movable = new Movable(inner),\n      dimensions = new PaneDimensions({\n        element: inner,\n        container: element,\n        forcedEnabled: that.options.zoom\n      }),\n      avoidScrolling = this.options.avoidScrolling,\n      userEvents = new UserEvents(element, {\n        touchAction: 'pan-y',\n        fastTap: true,\n        allowSelection: true,\n        preventDragEvent: true,\n        captureUpIfMoved: true,\n        multiTouch: that.options.zoom,\n        supportDoubleTap: that.options.supportDoubleTap,\n        start: function start(e) {\n          dimensions.refresh();\n          var velocityX = abs(e.x.velocity),\n            velocityY = abs(e.y.velocity),\n            horizontalSwipe = velocityX * 2 >= velocityY,\n            originatedFromFixedContainer = contains(that.fixedContainer, e.event.target),\n            verticalSwipe = velocityY * 2 >= velocityX;\n          if (!originatedFromFixedContainer && !avoidScrolling(e) && that.enabled && (dimensions.x.enabled && horizontalSwipe || dimensions.y.enabled && verticalSwipe)) {\n            userEvents.capture();\n          } else {\n            userEvents.cancel();\n          }\n        }\n      }),\n      pane = new Pane({\n        movable: movable,\n        dimensions: dimensions,\n        userEvents: userEvents,\n        elastic: that.options.elastic\n      }),\n      zoomSnapBack = new ZoomSnapBack({\n        movable: movable,\n        dimensions: dimensions,\n        userEvents: userEvents,\n        tapCapture: tapCapture\n      }),\n      animatedScroller = new AnimatedScroller({\n        moveTo: function moveTo(coordinates) {\n          that.scrollTo(coordinates.x, coordinates.y);\n        }\n      });\n    movable.bind(CHANGE, function () {\n      that.scrollTop = -movable.y;\n      that.scrollLeft = -movable.x;\n      that.trigger(SCROLL, {\n        scrollTop: that.scrollTop,\n        scrollLeft: that.scrollLeft\n      });\n    });\n    if (that.options.mousewheelScrolling) {\n      this._wheelScrollHandler = this._wheelScroll.bind(this);\n      on(element, 'DOMMouseScroll mousewheel', this._wheelScrollHandler);\n    }\n    extend(that, {\n      movable: movable,\n      dimensions: dimensions,\n      zoomSnapBack: zoomSnapBack,\n      animatedScroller: animatedScroller,\n      userEvents: userEvents,\n      pane: pane,\n      tapCapture: tapCapture,\n      pulled: false,\n      enabled: true,\n      scrollElement: inner,\n      scrollTop: 0,\n      scrollLeft: 0,\n      fixedContainer: element.children[0]\n    });\n    that._initAxis('x');\n    that._initAxis('y');\n    that._wheelEnd = function () {\n      that._wheel = false;\n      that.userEvents.end(0, that._wheelY);\n    };\n    dimensions.refresh();\n    if (that.options.pullToRefresh) {\n      that._initPullToRefresh();\n    }\n  }\n  if (Observable) Scroller.__proto__ = Observable;\n  Scroller.prototype = Object.create(Observable && Observable.prototype);\n  Scroller.prototype.constructor = Scroller;\n  Scroller.prototype._initOptions = function _initOptions(options) {\n    this.options = deepExtend({}, this.options, options);\n  };\n  Scroller.prototype._wheelScroll = function _wheelScroll(e) {\n    if (e.ctrlKey) {\n      return;\n    }\n    if (!this._wheel) {\n      this._wheel = true;\n      this._wheelY = 0;\n      this.userEvents.press(0, this._wheelY);\n    }\n    clearTimeout(this._wheelTimeout);\n    this._wheelTimeout = setTimeout(this._wheelEnd, 50);\n    var delta = wheelDeltaY(e);\n    if (delta) {\n      this._wheelY += delta;\n      this.userEvents.move(0, this._wheelY);\n    }\n    e.preventDefault();\n  };\n  Scroller.prototype.makeVirtual = function makeVirtual() {\n    this.dimensions.y.makeVirtual();\n  };\n  Scroller.prototype.virtualSize = function virtualSize(min, max) {\n    this.dimensions.y.virtualSize(min, max);\n  };\n  Scroller.prototype.height = function height() {\n    return this.dimensions.y.size;\n  };\n  Scroller.prototype.scrollHeight = function scrollHeight() {\n    return this.scrollElement.scrollHeight;\n  };\n  Scroller.prototype.scrollWidth = function scrollWidth() {\n    return this.scrollElement.scrollWidth;\n  };\n  Scroller.prototype._resize = function _resize() {\n    if (!this._native) {\n      this.contentResized();\n    }\n  };\n  Scroller.prototype.setOptions = function setOptions(options) {\n    var that = this;\n    this._initOptions(options);\n    if (options.pullToRefresh) {\n      that._initPullToRefresh();\n    }\n  };\n  Scroller.prototype.reset = function reset() {\n    if (this._native) {\n      this.scrollElement.scrollTop(0);\n    } else {\n      this.movable.moveTo({\n        x: 0,\n        y: 0\n      });\n      this._scale(1);\n    }\n  };\n  Scroller.prototype.contentResized = function contentResized() {\n    this.dimensions.refresh();\n    if (this.pane.x.outOfBounds()) {\n      this.movable.moveAxis('x', this.dimensions.x.min);\n    }\n    if (this.pane.y.outOfBounds()) {\n      this.movable.moveAxis('y', this.dimensions.y.min);\n    }\n  };\n  Scroller.prototype.zoomOut = function zoomOut() {\n    var dimensions = this.dimensions;\n    dimensions.refresh();\n    this._scale(dimensions.fitScale);\n    this.movable.moveTo(dimensions.centerCoordinates());\n  };\n  Scroller.prototype.enable = function enable() {\n    this.enabled = true;\n  };\n  Scroller.prototype.disable = function disable() {\n    this.enabled = false;\n  };\n  Scroller.prototype.scrollTo = function scrollTo(x, y) {\n    if (this._native) {\n      this.scrollElement.scrollLeft(abs(x));\n      this.scrollElement.scrollTop(abs(y));\n    } else {\n      this.dimensions.refresh();\n      this.movable.moveTo({\n        x: x,\n        y: y\n      });\n    }\n  };\n  Scroller.prototype.animatedScrollTo = function animatedScrollTo(x, y, callback) {\n    var from, to;\n    if (this._native) {\n      this.scrollTo(x, y);\n    } else {\n      from = {\n        x: this.movable.x,\n        y: this.movable.y\n      };\n      to = {\n        x: x,\n        y: y\n      };\n      this.animatedScroller.setCoordinates(from, to);\n      this.animatedScroller.setCallback(callback);\n      this.animatedScroller.start();\n    }\n  };\n\n  // kept for API compatibility, not used\n  Scroller.prototype.pullHandled = function pullHandled() {\n    // let that = this;\n\n    // removeClass(that.refreshHint, SCROLLER_REFRESH_CLASS);\n    // that.hintContainer.innerHTML = that.pullTemplate({}));\n\n    // that.yinertia.onEnd();\n    // that.xinertia.onEnd();\n    // that.userEvents.cancel();\n  };\n  Scroller.prototype.destroy = function destroy() {\n    var element = this.element;\n    off(element, 'DOMMouseScroll mousewheel', this._wheelScrollHandler);\n    if (this.userEvents) {\n      this.userEvents.destroy();\n    }\n  };\n  Scroller.prototype._scale = function _scale(scale) {\n    this.dimensions.rescale(scale);\n    this.movable.scaleTo(scale);\n  };\n  Scroller.prototype._initPullToRefresh = function _initPullToRefresh() {};\n\n  // kept for API compatibility, not used\n  Scroller.prototype._dragEnd = function _dragEnd() {\n    // let that = this;\n\n    // if (!that.pulled) {\n    //     return;\n    // }\n\n    // that.pulled = false;\n\n    // removeClass(that.refreshHint, SCROLLER_RELEASE_CLASS);\n    // addClass(that.refreshHint, SCROLLER_REFRESH_CLASS);\n\n    // that.hintContainer.innerHTML = that.refreshTemplate({});\n\n    // that.yinertia.freeze(that.options.pullOffset / 2);\n    // that.trigger('pull');\n  };\n\n  // kept for API compatibility, not used\n  Scroller.prototype._paneChange = function _paneChange() {\n    // let that = this;\n    // if (that.movable.y / OUT_OF_BOUNDS_FRICTION > that.options.pullOffset) {\n    //     if (!that.pulled) {\n    //         that.pulled = true;\n    //         that.refreshHint.removeClass(SCROLLER_REFRESH_CLASS).addClass(SCROLLER_RELEASE_CLASS);\n    //         that.hintContainer.html(that.releaseTemplate({}));\n    //         that.hintContainer.html(that.releaseTemplate({}));\n    //     }\n    // } else if (that.pulled) {\n    //     that.pulled = false;\n    //     that.refreshHint.removeClass(SCROLLER_RELEASE_CLASS);\n    //     that.hintContainer.html(that.pullTemplate({}));\n    // }\n  };\n  Scroller.prototype._initAxis = function _initAxis(axis) {\n    var that = this,\n      movable = that.movable,\n      dimension = that.dimensions[axis],\n      tapCapture = that.tapCapture,\n      paneAxis = that.pane[axis],\n      scrollBar = new ScrollBar({\n        axis: axis,\n        movable: movable,\n        dimension: dimension,\n        container: that.element,\n        alwaysVisible: that.options.visibleScrollHints\n      });\n    dimension.bind(CHANGE, function () {\n      scrollBar.refresh();\n    });\n    paneAxis.bind(CHANGE, function () {\n      scrollBar.show();\n    });\n    that[axis + 'inertia'] = new DragInertia({\n      axis: axis,\n      paneAxis: paneAxis,\n      movable: movable,\n      tapCapture: tapCapture,\n      userEvents: that.userEvents,\n      dimension: dimension,\n      elastic: that.options.elastic,\n      friction: that.options.friction || FRICTION,\n      velocityMultiplier: that.options.velocityMultiplier || VELOCITY_MULTIPLIER,\n      end: function end() {\n        scrollBar.hide();\n        that.trigger('scrollEnd', {\n          axis: axis,\n          scrollTop: that.scrollTop,\n          scrollLeft: that.scrollLeft\n        });\n      }\n    });\n  };\n  return Scroller;\n}(Observable);\nsetDefaultOptions(Scroller, {\n  name: 'Scroller',\n  zoom: false,\n  pullOffset: 140,\n  visibleScrollHints: false,\n  elastic: true,\n  useNative: false,\n  mousewheelScrolling: true,\n  avoidScrolling: function avoidScrolling() {\n    return false;\n  },\n  pullToRefresh: false,\n  messages: {\n    pullTemplate: 'Pull to refresh',\n    releaseTemplate: 'Release to refresh',\n    refreshTemplate: 'Refreshing'\n  }\n});\nsetDefaultEvents(Scroller, [PULL, SCROLL, RESIZE]);","map":{"version":3,"names":["Class","deepExtend","addClass","isFunction","setDefaultOptions","convertToHtml","prepend","wrapInner","contains","hasNativeScrolling","on","off","proxy","wheelDeltaY","setDefaultEvents","Transition","Animation","Pane","PaneDimensions","Movable","TapCapture","UserEvents","Observable","extend","Object","assign","abs","Math","SNAPBACK_DURATION","SCROLLBAR_OPACITY","FRICTION","VELOCITY_MULTIPLIER","MAX_VELOCITY","OUT_OF_BOUNDS_FRICTION","ANIMATED_SCROLLER_PRECISION","PULL","CHANGE","RESIZE","SCROLL","MOUSE_WHEEL_ID","ZoomSnapBack","options","call","that","userEvents","bind","start","tapCapture","cancel","__proto__","prototype","create","constructor","enabled","movable","scale","dimensions","minScale","done","tick","scaleWith","rescale","onEnd","scaleTo","DragInertia","transition","axis","_end","onCancel","freeze","location","_moveTo","paneAxis","outOfBounds","_snapBack","velocity","e","dimension","_started","min","touch","velocityMultiplier","id","max","captureNext","friction","delta","elastic","moveAxis","cancelCapture","end","snapBack","moveTo","duration","ease","easeOutExpo","AnimatedScroller","origin","destination","offset","_updateCoordinates","y","x","callback","setCoordinates","from","to","setCallback","undefined","ScrollBar","horizontal","orientation","element","elementSize","scrollMovable","alwaysVisible","size","refresh","container","appendChild","show","paneSize","sizeRatio","total","position","round","style","display","opacity","visibility","hide","Scroller","_initOptions","hasScrolling","navigator","userAgent","_native","useNative","scrollHeader","scrollElement","fixedContainer","children","overflow","scrollContainer","inner","forcedEnabled","zoom","avoidScrolling","touchAction","fastTap","allowSelection","preventDragEvent","captureUpIfMoved","multiTouch","supportDoubleTap","velocityX","velocityY","horizontalSwipe","originatedFromFixedContainer","event","target","verticalSwipe","capture","pane","zoomSnapBack","animatedScroller","coordinates","scrollTo","scrollTop","scrollLeft","trigger","mousewheelScrolling","_wheelScrollHandler","_wheelScroll","pulled","_initAxis","_wheelEnd","_wheel","_wheelY","pullToRefresh","_initPullToRefresh","ctrlKey","press","clearTimeout","_wheelTimeout","setTimeout","move","preventDefault","makeVirtual","virtualSize","height","scrollHeight","scrollWidth","_resize","contentResized","setOptions","reset","_scale","zoomOut","fitScale","centerCoordinates","enable","disable","animatedScrollTo","pullHandled","destroy","_dragEnd","_paneChange","scrollBar","visibleScrollHints","name","pullOffset","messages","pullTemplate","releaseTemplate","refreshTemplate"],"sources":["C:/Users/Павел/Desktop/react humster/my-app/node_modules/@progress/kendo-charts/dist/es/map/scroller/scroller.js"],"sourcesContent":["// todo: extract to a separate place\n\nimport {\n    Class,\n    deepExtend,\n    addClass,\n    isFunction,\n    setDefaultOptions\n} from '../../common';\n\nimport {\n    convertToHtml,\n    prepend,\n    wrapInner,\n    contains,\n    hasNativeScrolling,\n    on,\n    off,\n    proxy,\n    wheelDeltaY,\n    setDefaultEvents\n} from '../utils';\n\nimport {\n    Transition,\n    Animation\n} from './fx';\n\nimport {\n    Pane,\n    PaneDimensions,\n    Movable,\n    TapCapture\n} from './draggable';\n\nimport {\n    UserEvents\n} from './user-events';\n\nimport {\n    Observable\n} from './observable';\n\nvar\n    extend = Object.assign,\n    abs = Math.abs,\n    SNAPBACK_DURATION = 500,\n    SCROLLBAR_OPACITY = 0.7,\n    FRICTION = 0.96,\n    VELOCITY_MULTIPLIER = 10,\n    MAX_VELOCITY = 55,\n    OUT_OF_BOUNDS_FRICTION = 0.5,\n    ANIMATED_SCROLLER_PRECISION = 5,\n    // SCROLLER_RELEASE_CLASS = 'km-scroller-release',\n    // SCROLLER_REFRESH_CLASS = 'km-scroller-refresh',\n    PULL = 'pull',\n    CHANGE = 'change',\n    RESIZE = 'resize',\n    SCROLL = 'scroll',\n    MOUSE_WHEEL_ID = 2;\n\nvar ZoomSnapBack = (function (Animation) {\n    function ZoomSnapBack(options) {\n        Animation.call(this, options);\n        var that = this;\n        extend(that, options);\n        that.userEvents.bind('gestureend', that.start.bind(this));\n        that.tapCapture.bind('press', that.cancel.bind(this));\n    }\n\n    if ( Animation ) ZoomSnapBack.__proto__ = Animation;\n    ZoomSnapBack.prototype = Object.create( Animation && Animation.prototype );\n    ZoomSnapBack.prototype.constructor = ZoomSnapBack;\n\n    ZoomSnapBack.prototype.enabled = function enabled () {\n        return this.movable.scale < this.dimensions.minScale;\n    };\n\n    ZoomSnapBack.prototype.done = function done () {\n        return this.dimensions.minScale - this.movable.scale < 0.01;\n    };\n\n    ZoomSnapBack.prototype.tick = function tick () {\n        var movable = this.movable;\n        movable.scaleWith(1.1);\n        this.dimensions.rescale(movable.scale);\n    };\n\n    ZoomSnapBack.prototype.onEnd = function onEnd () {\n        var movable = this.movable;\n        movable.scaleTo(this.dimensions.minScale);\n        this.dimensions.rescale(movable.scale);\n    };\n\n    return ZoomSnapBack;\n}(Animation));\n\nvar DragInertia = (function (Animation) {\n    function DragInertia(options) {\n        Animation.call(this);\n        var that = this;\n\n        extend(that, options, {\n            transition: new Transition({\n                axis: options.axis,\n                movable: options.movable,\n                onEnd: function onEnd() {\n                    that._end();\n                }\n            })\n        });\n\n        that.tapCapture.bind('press', function() {\n            that.cancel();\n        });\n\n        that.userEvents.bind('end', proxy(that.start, that));\n        that.userEvents.bind('gestureend', proxy(that.start, that));\n        that.userEvents.bind('tap', proxy(that.onEnd, that));\n    }\n\n    if ( Animation ) DragInertia.__proto__ = Animation;\n    DragInertia.prototype = Object.create( Animation && Animation.prototype );\n    DragInertia.prototype.constructor = DragInertia;\n\n    DragInertia.prototype.onCancel = function onCancel () {\n        this.transition.cancel();\n    };\n\n    DragInertia.prototype.freeze = function freeze (location) {\n        var that = this;\n        that.cancel();\n        that._moveTo(location);\n    };\n\n    DragInertia.prototype.onEnd = function onEnd () {\n        var that = this;\n        if (that.paneAxis.outOfBounds()) {\n            that._snapBack();\n        } else {\n            that._end();\n        }\n    };\n\n    DragInertia.prototype.done = function done () {\n        return abs(this.velocity) < 1;\n    };\n\n    DragInertia.prototype.start = function start (e) {\n        var that = this,\n            velocity;\n        if (!that.dimension.enabled) {\n            return;\n        }\n        if (that.paneAxis.outOfBounds()) {\n            if (that.transition._started) {\n                that.transition.cancel();\n                that.velocity = Math.min(e.touch[that.axis].velocity * that.velocityMultiplier, MAX_VELOCITY);\n                Animation.prototype.start.call(this);\n            } else {\n                that._snapBack();\n            }\n        } else {\n            velocity = e.touch.id === MOUSE_WHEEL_ID ? 0 : e.touch[that.axis].velocity;\n            that.velocity = Math.max(Math.min(velocity * that.velocityMultiplier, MAX_VELOCITY), -MAX_VELOCITY);\n            that.tapCapture.captureNext();\n            Animation.prototype.start.call(this);\n        }\n    };\n\n    DragInertia.prototype.tick = function tick () {\n        var that = this,\n            dimension = that.dimension,\n            friction = that.paneAxis.outOfBounds() ? OUT_OF_BOUNDS_FRICTION : that.friction,\n            delta = that.velocity *= friction,\n            location = that.movable[that.axis] + delta;\n\n        if (!that.elastic && dimension.outOfBounds(location)) {\n            location = Math.max(Math.min(location, dimension.max), dimension.min);\n            that.velocity = 0;\n        }\n\n        that.movable.moveAxis(that.axis, location);\n    };\n\n    DragInertia.prototype._end = function _end () {\n        this.tapCapture.cancelCapture();\n        this.end();\n    };\n\n    DragInertia.prototype._snapBack = function _snapBack () {\n        var that = this,\n            dimension = that.dimension,\n            snapBack = that.movable[that.axis] > dimension.max ? dimension.max : dimension.min;\n\n        that._moveTo(snapBack);\n    };\n\n    DragInertia.prototype._moveTo = function _moveTo (location) {\n        this.transition.moveTo({\n            location: location,\n            duration: SNAPBACK_DURATION,\n            ease: Transition.easeOutExpo\n        });\n    };\n\n    return DragInertia;\n}(Animation));\n\nvar AnimatedScroller = (function (Animation) {\n    function AnimatedScroller(options) {\n        Animation.call(this, options);\n        var that = this;\n\n        extend(that, options, {\n            origin: {},\n            destination: {},\n            offset: {}\n        });\n    }\n\n    if ( Animation ) AnimatedScroller.__proto__ = Animation;\n    AnimatedScroller.prototype = Object.create( Animation && Animation.prototype );\n    AnimatedScroller.prototype.constructor = AnimatedScroller;\n\n    AnimatedScroller.prototype.tick = function tick () {\n        this._updateCoordinates();\n        this.moveTo(this.origin);\n    };\n\n    AnimatedScroller.prototype.done = function done () {\n        return abs(this.offset.y) < ANIMATED_SCROLLER_PRECISION && abs(this.offset.x) < ANIMATED_SCROLLER_PRECISION;\n    };\n\n    AnimatedScroller.prototype.onEnd = function onEnd () {\n        this.moveTo(this.destination);\n        if (this.callback) {\n            this.callback.call();\n        }\n    };\n\n    AnimatedScroller.prototype.setCoordinates = function setCoordinates (from, to) {\n        this.offset = {};\n        this.origin = from;\n        this.destination = to;\n    };\n\n    /* eslint-disable no-param-reassign */\n    AnimatedScroller.prototype.setCallback = function setCallback (callback) {\n        if (callback && isFunction(callback)) {\n            this.callback = callback;\n        } else {\n            callback = undefined;\n        }\n    };\n    /* eslint-enable no-param-reassign */\n\n    AnimatedScroller.prototype._updateCoordinates = function _updateCoordinates () {\n        this.offset = {\n            x: (this.destination.x - this.origin.x) / 4,\n            y: (this.destination.y - this.origin.y) / 4\n        };\n        this.origin = {\n            y: this.origin.y + this.offset.y,\n            x: this.origin.x + this.offset.x\n        };\n    };\n\n    return AnimatedScroller;\n}(Animation));\n\nvar ScrollBar = (function (Class) {\n    function ScrollBar(options) {\n        Class.call(this);\n        var that = this,\n            horizontal = options.axis === 'x';\n\n        var orientation = (horizontal ? 'horizontal' : 'vertical');\n        var element = convertToHtml('<div class=\"km-touch-scrollbar km-' + orientation + '-scrollbar\" />');\n\n        extend(that, options, {\n            element: element,\n            elementSize: 0,\n            movable: new Movable(element),\n            scrollMovable: options.movable,\n            alwaysVisible: options.alwaysVisible,\n            size: horizontal ? 'width' : 'height'\n        });\n\n        that.scrollMovable.bind(CHANGE, that.refresh.bind(that));\n\n        that.container.appendChild(element);\n\n        if (options.alwaysVisible) {\n            that.show();\n        }\n    }\n\n    if ( Class ) ScrollBar.__proto__ = Class;\n    ScrollBar.prototype = Object.create( Class && Class.prototype );\n    ScrollBar.prototype.constructor = ScrollBar;\n\n    ScrollBar.prototype.refresh = function refresh () {\n        var that = this,\n            axis = that.axis,\n            dimension = that.dimension,\n            paneSize = dimension.size,\n            scrollMovable = that.scrollMovable,\n            sizeRatio = paneSize / dimension.total,\n            position = Math.round(-scrollMovable[axis] * sizeRatio),\n            size = Math.round(paneSize * sizeRatio);\n        if (sizeRatio >= 1) {\n            this.element.style.display = \"none\";\n        } else {\n            this.element.style.display = \"\";\n        }\n        if (position + size > paneSize) {\n            size = paneSize - position;\n        } else if (position < 0) {\n            size += position;\n            position = 0;\n        }\n        if (that.elementSize !== size) {\n            that.element.style[that.size] = size + 'px';\n            that.elementSize = size;\n        }\n        that.movable.moveAxis(axis, position);\n    };\n\n    ScrollBar.prototype.show = function show () {\n        this.element.style.opacity = SCROLLBAR_OPACITY;\n        this.element.style.visibility = \"visible\";\n    };\n\n    ScrollBar.prototype.hide = function hide () {\n        if (!this.alwaysVisible) {\n            this.element.style.opacity = 0;\n        }\n    };\n\n    return ScrollBar;\n}(Class));\n\n// export class Scroller extends Class {\nexport var Scroller = (function (Observable) {\n    function Scroller(element, options) {\n        Observable.call(this);\n        var that = this;\n        this.element = element;\n\n        this._initOptions(options);\n\n        var hasScrolling = hasNativeScrolling(navigator.userAgent);\n        that._native = that.options.useNative && hasScrolling;\n        var scrollHeader = convertToHtml('<div class=\"km-scroll-header\"/>');\n\n        if (that._native) {\n            addClass(element, 'km-native-scroller');\n            prepend(scrollHeader, element);\n\n            extend(that, {\n                scrollElement: element,\n                fixedContainer: element.children[0]\n            });\n\n            return;\n        }\n\n        element.style.overflow = \"hidden\";\n        addClass(element, 'km-scroll-wrapper');\n\n        var scrollContainer = convertToHtml('<div class=\"km-scroll-container\"/>');\n        wrapInner(element, scrollContainer);\n        prepend(scrollHeader, element);\n\n        var inner = element.children[1],\n            tapCapture = new TapCapture(element),\n            movable = new Movable(inner),\n\n            dimensions = new PaneDimensions({\n                element: inner,\n                container: element,\n                forcedEnabled: that.options.zoom\n            }),\n            avoidScrolling = this.options.avoidScrolling,\n\n            userEvents = new UserEvents(element, {\n                touchAction: 'pan-y',\n                fastTap: true,\n                allowSelection: true,\n                preventDragEvent: true,\n                captureUpIfMoved: true,\n                multiTouch: that.options.zoom,\n                supportDoubleTap: that.options.supportDoubleTap,\n                start: function start(e) {\n                    dimensions.refresh();\n                    var velocityX = abs(e.x.velocity),\n                        velocityY = abs(e.y.velocity),\n                        horizontalSwipe = velocityX * 2 >= velocityY,\n                        originatedFromFixedContainer = contains(that.fixedContainer, e.event.target),\n                        verticalSwipe = velocityY * 2 >= velocityX;\n                    if (!originatedFromFixedContainer && !avoidScrolling(e) && that.enabled && (dimensions.x.enabled && horizontalSwipe || dimensions.y.enabled && verticalSwipe)) {\n                        userEvents.capture();\n                    } else {\n                        userEvents.cancel();\n                    }\n                }\n            }),\n\n            pane = new Pane({\n                movable: movable,\n                dimensions: dimensions,\n                userEvents: userEvents,\n                elastic: that.options.elastic\n            }),\n\n            zoomSnapBack = new ZoomSnapBack({\n                movable: movable,\n                dimensions: dimensions,\n                userEvents: userEvents,\n                tapCapture: tapCapture\n            }),\n\n            animatedScroller = new AnimatedScroller({\n                moveTo: function moveTo(coordinates) {\n                    that.scrollTo(coordinates.x, coordinates.y);\n                }\n            });\n\n        movable.bind(CHANGE, function() {\n            that.scrollTop = -movable.y;\n            that.scrollLeft = -movable.x;\n            that.trigger(SCROLL, {\n                scrollTop: that.scrollTop,\n                scrollLeft: that.scrollLeft\n            });\n        });\n\n        if (that.options.mousewheelScrolling) {\n            this._wheelScrollHandler = this._wheelScroll.bind(this);\n            on(element, 'DOMMouseScroll mousewheel', this._wheelScrollHandler);\n        }\n\n        extend(that, {\n            movable: movable,\n            dimensions: dimensions,\n            zoomSnapBack: zoomSnapBack,\n            animatedScroller: animatedScroller,\n            userEvents: userEvents,\n            pane: pane,\n            tapCapture: tapCapture,\n            pulled: false,\n            enabled: true,\n            scrollElement: inner,\n            scrollTop: 0,\n            scrollLeft: 0,\n            fixedContainer: element.children[0]\n        });\n\n        that._initAxis('x');\n        that._initAxis('y');\n\n        that._wheelEnd = function() {\n            that._wheel = false;\n            that.userEvents.end(0, that._wheelY);\n        };\n\n        dimensions.refresh();\n\n        if (that.options.pullToRefresh) {\n            that._initPullToRefresh();\n        }\n    }\n\n    if ( Observable ) Scroller.__proto__ = Observable;\n    Scroller.prototype = Object.create( Observable && Observable.prototype );\n    Scroller.prototype.constructor = Scroller;\n\n    Scroller.prototype._initOptions = function _initOptions (options) {\n        this.options = deepExtend({}, this.options, options);\n    };\n\n    Scroller.prototype._wheelScroll = function _wheelScroll (e) {\n        if (e.ctrlKey) {\n            return;\n        }\n        if (!this._wheel) {\n            this._wheel = true;\n            this._wheelY = 0;\n            this.userEvents.press(0, this._wheelY);\n        }\n\n        clearTimeout(this._wheelTimeout);\n        this._wheelTimeout = setTimeout(this._wheelEnd, 50);\n        var delta = wheelDeltaY(e);\n\n        if (delta) {\n            this._wheelY += delta;\n            this.userEvents.move(0, this._wheelY);\n        }\n\n        e.preventDefault();\n    };\n\n    Scroller.prototype.makeVirtual = function makeVirtual () {\n        this.dimensions.y.makeVirtual();\n    };\n\n    Scroller.prototype.virtualSize = function virtualSize (min, max) {\n        this.dimensions.y.virtualSize(min, max);\n    };\n\n    Scroller.prototype.height = function height () {\n        return this.dimensions.y.size;\n    };\n\n    Scroller.prototype.scrollHeight = function scrollHeight () {\n        return this.scrollElement.scrollHeight;\n    };\n\n    Scroller.prototype.scrollWidth = function scrollWidth () {\n        return this.scrollElement.scrollWidth;\n    };\n\n    Scroller.prototype._resize = function _resize () {\n        if (!this._native) {\n            this.contentResized();\n        }\n    };\n\n    Scroller.prototype.setOptions = function setOptions (options) {\n        var that = this;\n\n        this._initOptions(options);\n\n        if (options.pullToRefresh) {\n            that._initPullToRefresh();\n        }\n    };\n\n    Scroller.prototype.reset = function reset () {\n        if (this._native) {\n            this.scrollElement.scrollTop(0);\n        } else {\n            this.movable.moveTo({\n                x: 0,\n                y: 0\n            });\n            this._scale(1);\n        }\n    };\n\n    Scroller.prototype.contentResized = function contentResized () {\n        this.dimensions.refresh();\n        if (this.pane.x.outOfBounds()) {\n            this.movable.moveAxis('x', this.dimensions.x.min);\n        }\n        if (this.pane.y.outOfBounds()) {\n            this.movable.moveAxis('y', this.dimensions.y.min);\n        }\n    };\n\n    Scroller.prototype.zoomOut = function zoomOut () {\n        var dimensions = this.dimensions;\n        dimensions.refresh();\n        this._scale(dimensions.fitScale);\n        this.movable.moveTo(dimensions.centerCoordinates());\n    };\n\n    Scroller.prototype.enable = function enable () {\n        this.enabled = true;\n    };\n\n    Scroller.prototype.disable = function disable () {\n        this.enabled = false;\n    };\n\n    Scroller.prototype.scrollTo = function scrollTo (x, y) {\n        if (this._native) {\n            this.scrollElement.scrollLeft(abs(x));\n            this.scrollElement.scrollTop(abs(y));\n        } else {\n            this.dimensions.refresh();\n            this.movable.moveTo({\n                x: x,\n                y: y\n            });\n        }\n    };\n\n    Scroller.prototype.animatedScrollTo = function animatedScrollTo (x, y, callback) {\n        var from, to;\n        if (this._native) {\n            this.scrollTo(x, y);\n        } else {\n            from = {\n                x: this.movable.x,\n                y: this.movable.y\n            };\n            to = {\n                x: x,\n                y: y\n            };\n            this.animatedScroller.setCoordinates(from, to);\n            this.animatedScroller.setCallback(callback);\n            this.animatedScroller.start();\n        }\n    };\n\n    // kept for API compatibility, not used\n    Scroller.prototype.pullHandled = function pullHandled () {\n        // let that = this;\n\n        // removeClass(that.refreshHint, SCROLLER_REFRESH_CLASS);\n        // that.hintContainer.innerHTML = that.pullTemplate({}));\n\n        // that.yinertia.onEnd();\n        // that.xinertia.onEnd();\n        // that.userEvents.cancel();\n    };\n\n    Scroller.prototype.destroy = function destroy () {\n        var element = this.element;\n\n        off(element, 'DOMMouseScroll mousewheel', this._wheelScrollHandler);\n\n        if (this.userEvents) {\n            this.userEvents.destroy();\n        }\n    };\n\n    Scroller.prototype._scale = function _scale (scale) {\n        this.dimensions.rescale(scale);\n        this.movable.scaleTo(scale);\n    };\n\n    Scroller.prototype._initPullToRefresh = function _initPullToRefresh () {\n    };\n\n    // kept for API compatibility, not used\n    Scroller.prototype._dragEnd = function _dragEnd () {\n        // let that = this;\n\n        // if (!that.pulled) {\n        //     return;\n        // }\n\n        // that.pulled = false;\n\n        // removeClass(that.refreshHint, SCROLLER_RELEASE_CLASS);\n        // addClass(that.refreshHint, SCROLLER_REFRESH_CLASS);\n\n        // that.hintContainer.innerHTML = that.refreshTemplate({});\n\n        // that.yinertia.freeze(that.options.pullOffset / 2);\n        // that.trigger('pull');\n    };\n\n    // kept for API compatibility, not used\n    Scroller.prototype._paneChange = function _paneChange () {\n        // let that = this;\n        // if (that.movable.y / OUT_OF_BOUNDS_FRICTION > that.options.pullOffset) {\n        //     if (!that.pulled) {\n        //         that.pulled = true;\n        //         that.refreshHint.removeClass(SCROLLER_REFRESH_CLASS).addClass(SCROLLER_RELEASE_CLASS);\n        //         that.hintContainer.html(that.releaseTemplate({}));\n        //         that.hintContainer.html(that.releaseTemplate({}));\n        //     }\n        // } else if (that.pulled) {\n        //     that.pulled = false;\n        //     that.refreshHint.removeClass(SCROLLER_RELEASE_CLASS);\n        //     that.hintContainer.html(that.pullTemplate({}));\n        // }\n    };\n\n    Scroller.prototype._initAxis = function _initAxis (axis) {\n        var that = this,\n            movable = that.movable,\n            dimension = that.dimensions[axis],\n            tapCapture = that.tapCapture,\n            paneAxis = that.pane[axis],\n            scrollBar = new ScrollBar({\n                axis: axis,\n                movable: movable,\n                dimension: dimension,\n                container: that.element,\n                alwaysVisible: that.options.visibleScrollHints\n            });\n\n        dimension.bind(CHANGE, function() {\n            scrollBar.refresh();\n        });\n\n        paneAxis.bind(CHANGE, function() {\n            scrollBar.show();\n        });\n\n        that[axis + 'inertia'] = new DragInertia({\n            axis: axis,\n            paneAxis: paneAxis,\n            movable: movable,\n            tapCapture: tapCapture,\n            userEvents: that.userEvents,\n            dimension: dimension,\n            elastic: that.options.elastic,\n            friction: that.options.friction || FRICTION,\n            velocityMultiplier: that.options.velocityMultiplier || VELOCITY_MULTIPLIER,\n            end: function end() {\n                scrollBar.hide();\n                that.trigger('scrollEnd', {\n                    axis: axis,\n                    scrollTop: that.scrollTop,\n                    scrollLeft: that.scrollLeft\n                });\n            }\n        });\n    };\n\n    return Scroller;\n}(Observable));\n\nsetDefaultOptions(Scroller, {\n    name: 'Scroller',\n    zoom: false,\n    pullOffset: 140,\n    visibleScrollHints: false,\n    elastic: true,\n    useNative: false,\n    mousewheelScrolling: true,\n    avoidScrolling: function avoidScrolling() {\n        return false;\n    },\n    pullToRefresh: false,\n    messages: {\n        pullTemplate: 'Pull to refresh',\n        releaseTemplate: 'Release to refresh',\n        refreshTemplate: 'Refreshing'\n    }\n});\n\nsetDefaultEvents(Scroller, [\n    PULL,\n    SCROLL,\n    RESIZE\n]);\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}